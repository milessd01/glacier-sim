<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Glacier Mission Control</title>
    <link rel="stylesheet" href="/src/styles.css" />
  </head>
  <body>
    <main class="app">
      <header class="header">
        <div>
          <p class="eyebrow">Glacier Mission Control</p>
          <div class="glacier-selector">
            <label for="glacier-select">Active Glacier</label>
            <select id="glacier-select">
              <option value="mendenhall">Mendenhall Glacier</option>
              <option value="hubbard">Hubbard Glacier</option>
              <option value="columbia">Columbia Glacier</option>
            </select>
          </div>
          <p id="glacier-subtitle" class="subtitle">Live atmospheric inputs and mass-balance diagnostics.</p>
          <p id="glacier-coordinates" class="coordinates">--</p>
        </div>
        <div class="header-actions">
          <button id="glacier-info" class="btn btn-secondary">Glacier Info</button>
          <button id="refresh-weather" class="btn btn-primary">Refresh Data</button>
          <span id="data-status" class="status-pill live">Live data</span>
        </div>
      </header>

      <section class="grid">
        <article class="card">
          <h2>Current Conditions</h2>
          <div class="metric-row">
            <span>Temperature</span>
            <strong><span id="temperature">--</span>Â°C</strong>
          </div>
          <div class="metric-row">
            <span>Wind Speed</span>
            <strong><span id="wind-speed">--</span> km/h</strong>
          </div>
          <div class="metric-row">
            <span>Precipitation</span>
            <strong><span id="precipitation">--</span> mm</strong>
          </div>
          <div class="metric-row">
            <span>Humidity</span>
            <strong><span id="humidity">--</span>%</strong>
          </div>
          <div class="metric-row">
            <span>Pressure</span>
            <strong><span id="pressure">--</span> hPa</strong>
          </div>
          <p class="timestamp">Updated: <span id="timestamp">--</span></p>
        </article>

        <article class="card">
          <h2>Today's Prediction</h2>
          <div class="metric-row">
            <span>Daily Mass Change</span>
            <strong><span id="daily-change">--</span></strong>
          </div>
          <div class="metric-row">
            <span>Glacier Health Index</span>
            <strong><span id="health-index">--</span></strong>
          </div>
          <div class="metric-row">
            <span>Glacier State</span>
            <strong id="glacier-state" class="badge stable">Stable</strong>
          </div>
          <div class="metric-row">
            <span>Model Confidence</span>
            <strong id="confidence-badge" class="confidence-badge medium">Medium</strong>
          </div>
          <p id="confidence-why" class="hint">Evaluating data freshness and variability.</p>
          <div id="alert-badges" class="alert-badges"></div>
          <p class="hint">Snowfall only counts when temperature is &lt;= 1C.</p>
        </article>

        <article class="card">
          <h2>Trend</h2>
          <div class="metric-row">
            <span>7-Day Rolling Trend</span>
            <strong><span id="seven-day-trend">--</span></strong>
          </div>
          <p id="simulation-source" class="hint">Simulation source: Observed</p>
          <div class="button-row">
            <button class="btn btn-secondary" data-simulate="1">Simulate 1 Day</button>
            <button class="btn btn-secondary" data-simulate="7">Simulate 7 Days</button>
            <button class="btn btn-secondary" data-simulate="30">Simulate 30 Days</button>
          </div>
        </article>

        <article class="card">
          <h2>Scenario Simulations</h2>
          <p class="hint">Run alternate climate paths, then simulate days.</p>
          <div class="button-row">
            <button class="btn btn-secondary scenario-btn" data-scenario="ice-age">Ice Age</button>
            <button class="btn btn-secondary scenario-btn" data-scenario="warming">More Warming</button>
          </div>
          <p class="hint">Each scenario runs a 7-day simulation.</p>
          <p id="scenario-status" class="hint">Scenario: Live baseline</p>
        </article>

        <article class="card chart-card">
          <h2>Glacier Health Index (<span id="chart-window-health">30</span> Days)</h2>
          <canvas id="chart-health" height="160"></canvas>
        </article>

        <article class="card chart-card">
          <h2>Daily Mass Change (<span id="chart-window-mass">30</span> Days)</h2>
          <canvas id="chart-mass" height="160"></canvas>
        </article>

        <article class="card">
          <h2>Time-to-Loss Projection</h2>
          <p class="metric-row">
            <span>Collapse Threshold</span>
            <strong>Health Index 40</strong>
          </p>
          <p id="time-to-loss-value" class="projection-value">--</p>
          <p id="time-to-loss-meta" class="hint">Based on 7-day rolling trend.</p>
          <p id="time-to-loss-source" class="hint">Source: --</p>
        </article>

        <article class="card summary-card">
          <h2>Daily Summary</h2>
          <p id="daily-summary">
            Loading the latest mission brief for the selected glacier.
          </p>
        </article>
      </section>
    </main>

    <section id="info-panel" class="info-panel hidden">
      <div class="info-card">
        <div class="info-header">
          <div>
            <p class="eyebrow">Field Briefing</p>
            <h2 id="info-title">Mendenhall Glacier</h2>
            <p id="info-subtitle" class="subtitle">History, context, and fast facts.</p>
          </div>
          <button id="info-home" class="btn btn-primary">Home</button>
        </div>
        <div class="info-grid">
          <article class="info-block">
            <h3>Origin Story</h3>
            <div id="info-origin"></div>
          </article>
          <article class="info-block">
            <h3>Timeline Highlights</h3>
            <ul id="info-timeline"></ul>
          </article>
          <article class="info-block">
            <h3>Fun Facts</h3>
            <ul id="info-facts"></ul>
          </article>
          <article class="info-block">
            <h3>Why It Matters</h3>
            <div id="info-matters"></div>
          </article>
        </div>
      </div>
    </section>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
